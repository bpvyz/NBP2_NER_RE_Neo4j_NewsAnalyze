News Knowledge Graph Builder
===========================

A complete pipeline that scrapes news articles, extracts entities and relationships using NLP, and visualizes them in an interactive Neo4j knowledge graph with Flask.

Quick Start
-----------

Prerequisites:
- Docker Desktop (https://www.docker.com/products/docker-desktop/)
- Python 3.8+
- OpenAI API key

Installation:
1. Set up Docker:
   - Download and install Docker Desktop
   - Ensure Docker engine is running

2. Configure environment:
   - Run the setup script: run-neo4j.bat
   - Will prompt for:
     * Neo4j username (default: neo4j)
     * Neo4j password (min 8 characters)
     * Your OpenAI API key

3. Install dependencies:
   pip install -r requirements.txt

Pipeline Execution
-----------------

Option 1: Run individual steps (recommended for development):

1. Scrape news articles:
   python news_scraper.py
   - Outputs to data/serbian_news_articles.json
   - Configure sources in sources.json
   - Configure scraping rules in scraping_rules.json

2. Process articles with NLP:
   python nlp.py
   - Uses OpenAI for NER and RE
   - Saves processed data to data/entities_and_relations.json

3. Build knowledge graph:
   python populate_graph.py
   - Creates nodes and relationships in Neo4j
   - Auto-connects using .env credentials

4. Launch visualization:
   python app.py
   - Access at: http://localhost:5000
   - Interactive graph explorer using Sigma.js

Option 2: Automated full pipeline (recommended for production):

python run_all.py
- Executes all steps sequentially:
  1. Deletes existing graphs (optional)
  2. Runs news_scraper.py
  3. Runs nlp.py
  4. Runs populate_graph.py
  5. Launches Flask app (app.py)
- Features:
  - Progress bars for each step
  - Error handling with automatic continuation
  - Time tracking for each stage
  - Clean console output

Configuration
-------------

- sources.json: Configure news sources and biases
- scraping_rules.json: Define site-specific scraping rules
- .env (autogenerated): Contains Neo4j and OpenAI credentials

Troubleshooting
---------------

- If Neo4j connection fails:
  - Verify Docker is running
  - Check credentials in .env match Neo4j setup
- For OpenAI errors:
  - Verify API key is valid
  - Check usage limits
- For scraping issues:
  - Update selectors in scraping_rules.json
  - Check network connectivity
  - Check rate limits